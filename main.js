!function(){"use strict";class e{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._likeButton.addEventListener("click",(()=>{this._handleLike()})),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._deleteButton.addEventListener("click",(()=>{this._handleDelete()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link,src:this._name})}))}_handleLike(){this._likeButton.classList.toggle("card__like-button_active")}_handleDelete(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitleElement.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);this._formElement.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close(),e.target.classList.contains("modal__close")&&this.close()}))}}class n extends s{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._handleFormSubmit=s}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),e.target.reset()}))}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__input_type_error",errorClass:".modal__error_visible"},o=(document.querySelector(".cards__list"),document.querySelector("#edit-modal")),r=document.querySelector("#add-card-modal"),a=document.querySelector("#add-card-form"),l=document.querySelector("#profile-edit-button"),c=document.querySelector(".profile__add-button"),u=(document.querySelector(".modal__input_type_title"),document.querySelector(".modal__input_type_url"),document.querySelector("#profile-name-input")),d=document.querySelector("#profile-description-input"),m=document.querySelector(".profile__title"),_=document.querySelector(".profile__description"),h=t=>{const s=function(t){return new e(t,"#card-template",b).getView()}(t);p.addItem(s)},p=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago Di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:h},".cards__list");p.renderItems();const E=new n({popupSelector:"#edit-modal",handleFormSubmit:function(e){y.setUserInfo(e),E.close()}});E.setEventListeners();const S=new n({popupSelector:"#add-card-modal",handleFormSubmit:function(e){const t=e.title,s=e.url;h({name:t,link:s}),a.reset(),S.close(),f.disableButton()}});S.setEventListeners();const v=new class extends s{constructor(e){super({popupSelector:e}),this._imagePreview=this._popupElement.querySelector(".modal__image"),this._textPreview=this._popupElement.querySelector(".modal__image-title")}open(e){this._imagePreview.src=e.link,this._imagePreview.alt=e.name,this._textPreview.textContent=e.name,super.open()}}("#image-preview-modal");v.setEventListeners();const y=new class{constructor(e,t){this._displayedName=e,this._displayedJob=t}getUserInfo(){return{name:this._displayedName.textContent,description:this._displayedJob.textContent}}setUserInfo(e){this._displayedName.textContent=e.name,this._displayedJob.textContent=e.description}}(m,_),g=new t(i,o),f=new t(i,r);function b(e){v.open(e)}g.enableValidation(),f.enableValidation(),l.addEventListener("click",(function(){const{name:e,description:t}=y.getUserInfo();u.value=e,d.value=t,g.resetValidation(),E.open()})),c.addEventListener("click",(()=>S.open()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXJCQXNJLEVBQWtCcEUsbUJBQ2xCNEQsRUFBaUI1RCxtQkFrQ2pCZ0MsRUFBZXBGLGlCQUFpQixTQXhCaEMsV0FDRSxNQUFNLEtBQUVULEVBQUksWUFBRWdJLEdBQWdCWixFQUFTVyxjQUN2Q2hDLEVBQVVQLE1BQVF4RixFQUNsQmdHLEVBQVNSLE1BQVF3QyxFQUNqQkMsRUFBa0JqRSxrQkFDbEJrRCxFQUFpQjNDLE1BQ25CLElBb0JBdUIsRUFBaUJyRixpQkFBaUIsU0FBUyxJQUFNNkcsRUFBYS9DLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29tcG9uZW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICAgIHNyYzogdGhpcy5fbmFtZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZSgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuICAgICk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxuICAgIF07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgLy8gb3BlbnMgcG9wdXBcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAvLyBjbG9zZXMgcG9wdXBcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgLy9saXN0ZW5zIGZvciBlc2MgYnV0dG9uXG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZGF0YSA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIERpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIi5tb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIi5tb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb21wb25lbnRzLmpzXCI7XG5cbi8vIFdyYXBwZXJzXG4vLyBXcmFwcGVyc1xuXG5jb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XG5cbi8vIEJ1dHRvbnMgJiBET01cbi8vIEJ1dHRvbnMgJiBET01cblxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuXG4vLyBGb3JtIERhdGFcbi8vIEZvcm0gRGF0YVxuXG5jb25zdCBjYXJkVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3R5cGVfdGl0bGVcIik7XG5jb25zdCBjYXJkVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF90eXBlX3VybFwiKTtcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIik7XG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3Qgam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbi8vIENhcmRzXG4vLyBDYXJkc1xuXG5jb25zdCByZW5kZXJDYXJkID0gKGNhcmREYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuLy9TZWN0aW9uLmpzXG4vL1NlY3Rpb24uanNcblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG5cbi8vIFBvcHVwV2l0aEZvcm1cbi8vIFBvcHVwV2l0aEZvcm1cblxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdCxcbn0pO1xuZWRpdFByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGhhbmRsZUFkZENhcmRGb3JtU3VibWl0LFxufSk7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gUG9wdXBXaXRoSW1hZ2Vcbi8vIFBvcHVwV2l0aEltYWdlXG5cbmNvbnN0IG5ld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2UtcHJldmlldy1tb2RhbFwiKTtcbm5ld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gVXNlckluZm9cbi8vIFVzZXJJbmZvXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lRWxlbWVudCwgam9iRWxlbWVudCk7XG5cbi8vIFZhbGlkYXRpb25cbi8vIFZhbGlkYXRpb25cblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUVkaXRNb2RhbCk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGFkZENhcmRNb2RhbCk7XG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy9GdW5jdGlvbnNcbi8vRnVuY3Rpb25zXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHVzZXJEYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xufVxuXG5mdW5jdGlvbiBwcmVmaWxsUHJvZmlsZURhdGEoKSB7XG4gIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24gfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xuICBuZXdJbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdCh1c2VySW5mbykge1xuICBjb25zdCBuYW1lID0gdXNlckluZm8udGl0bGU7XG4gIGNvbnN0IGxpbmsgPSB1c2VySW5mby51cmw7XG4gIHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0sIGNhcmRMaXN0RWxlbWVudCk7XG4gIGFkZENhcmRGb3JtRWxlbWVudC5yZXNldCgpO1xuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcbiAgYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XG59XG5cbi8vRXZlbnQgTGlzdGVuZXJzXG4vL0V2ZW50IExpc3RlbmVyc1xuXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcHJlZmlsbFByb2ZpbGVEYXRhKTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gbmV3Q2FyZFBvcHVwLm9wZW4oKSk7XG5cbi8vRXZlbnQgSGFuZGxlcnNcbi8vRXZlbnQgSGFuZGxlcnNcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9pbWFnZVByZXZpZXcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fdGV4dFByZXZpZXcgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtdGl0bGVcIik7XG4gIH1cbiAgb3BlbihkYXRhKSB7XG4gICAgdGhpcy5faW1hZ2VQcmV2aWV3LnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9pbWFnZVByZXZpZXcuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3RleHRQcmV2aWV3LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZUVsZW1lbnQsIGpvYkVsZW1lbnQpIHtcbiAgICB0aGlzLl9kaXNwbGF5ZWROYW1lID0gcHJvZmlsZU5hbWVFbGVtZW50O1xuICAgIHRoaXMuX2Rpc3BsYXllZEpvYiA9IGpvYkVsZW1lbnQ7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fZGlzcGxheWVkTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kaXNwbGF5ZWRKb2IudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XG4gICAgdGhpcy5fZGlzcGxheWVkTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy5fZGlzcGxheWVkSm9iLnRleHRDb250ZW50ID0gdXNlckRhdGEuZGVzY3JpcHRpb247XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGUiLCJfY2FyZEltYWdlRWxlbWVudCIsInNyYyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWxlbWVudCIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2lucHV0TGlzdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZGF0YSIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsInByb2ZpbGVFZGl0TW9kYWwiLCJhZGRDYXJkTW9kYWwiLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJwcm9maWxlRWRpdEJ0biIsImFkZE5ld0NhcmRCdXR0b24iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVOYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJyZW5kZXJDYXJkIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZWRpdFByb2ZpbGVQb3B1cCIsInVzZXJEYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsIm5ld0NhcmRQb3B1cCIsInRpdGxlIiwidXJsIiwiYWRkRm9ybVZhbGlkYXRvciIsIm5ld0ltYWdlUG9wdXAiLCJfaW1hZ2VQcmV2aWV3IiwiX3RleHRQcmV2aWV3IiwiX2Rpc3BsYXllZE5hbWUiLCJfZGlzcGxheWVkSm9iIiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsImVkaXRGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==